<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <table class='table table-borderless'>
        <tr>
          <th class="d-flex justify-content-center">
            <%= image_tag @customer.get_profile_image, size:'100x100' %>
          </th>
        </tr>
        <tr>
      	  <th class="p-0 text-center">
      	    <%= @customer.full_name %>
    	    </th>
        </tr>
        <tr>
      	  <th class="p-2 text-center">
            <%= link_to customers_information_edit_path, class: "btn btn-outline-secondary btn-block" do %>
              <i class="fas fa-user-cog"></i>
            <% end %>
    	    </th>
        </tr>
      </table>

      <div class="mt-3">
        <span class="text-center
        "><strong>今月の収支</strong></span>
        <table class="table table-bordered">
          <tr>
            <td class="text-center align-middle">収入</td>
            <td class="text-center align-middle">
              <% @current_month_incomes.each do |money| %>
                <% @earn += money.price %>
              <% end %>
              <%= @earn.to_s(:delimited) %>
            </td>
          </tr>
          <tr>
            <td class="text-center align-middle">支出</td>
            <td class="text-center align-middle">
              <% @current_month_spendings.each do |money| %>
                <% @spend += money.price %>
              <% end %>
              <%= @spend.to_s(:delimited) %>
            </td>
          </tr>
          <tr>
            <td class="text-center align-middle">合計</td>
            <td class="text-center align-middle">
              <%= (@earn - @spend).to_s(:delimited) %>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class='col-md-8 offset-md-1'>
      <!--直近のスケジュール表示-->
      <span><strong>今日の予定</strong></span>
      <% if @today_schedules.present? %>
        <table class="table">
          <thead class="thead-light">
            <tr>
              <th style="width:30%;">タイトル</th>
              <th>内容</th>
              <th style="width:20%;">時間</th>
            </tr>
          </thead>

          <tbody>
            <% @today_schedules.each do |schedule| %>
              <tr>
                <td><%= schedule.title %></td>
                <td><%= schedule.content %></td>
                <td><%= schedule.start_time.strftime('%R') %> ~ <%= schedule.end_time.strftime('%R') %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <ul>
          <li>今日の予定はありません</li>
        </ul>
      <% end %>

      <span><strong>明日の予定</strong></span>
      <% if @tomorrow_schedules.present? %>
        <table class="table">
          <thead class="thead-light">
            <tr>
              <th style="width:30%;">タイトル</th>
              <th>内容</th>
              <th style="width:20%;">時間</th>
            </tr>
          </thead>

          <tbody>
            <% @tomorrow_schedules.each do |schedule| %>
              <tr>
                <td><%= schedule.title %></td>
                <td><%= schedule.content %></td>
                <td><%= schedule.start_time.strftime('%R') %> ~ <%= schedule.end_time.strftime('%R') %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <ul>
          <li>明日の予定はありません</li>
        </ul>
      <% end %>




      <div>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>cu_id</th>
              <th>title</th>
              <th>price</th>
              <th>is_active</th>
              <th>date</th>
            </tr>
          </thead>

          <tbody>
            <% @household_budgets.each do |home| %>
              <tr>
                <td><%= home.id %></td>
                <td><%= home.customer_id %></td>
                <td><%= home.title_i18n %></td>
                <td><%= home.price.to_s(:delimited) %></td>
                <td><%= home.is_active %></td>
                <td><%= home.date %></td>
                <td><%= link_to "edit", edit_household_budget_path(home), class:"btn btn-success" %></td>
                <td><%= link_to "del", household_budget_path(home), method: :delete, class:"btn btn-danger" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>cu_id</th>
              <th>title</th>
              <th>start_time</th>
              <th>end_time</th>
              <th>date</th>
            </tr>
          </thead>

          <tbody>
            <% @life_cycles.each do |life| %>
              <tr>
                <td><%= life.id %></td>
                <td><%= life.customer_id %></td>
                <td><%= life.title_i18n %></td>
                <td><%= life.start_time.strftime('%R') %></td>
                <td><%= life.end_time.strftime('%R') %></td>
                <td><%= life.date %></td>
                <td><%= link_to "edit", edit_life_cycle_path(life), class:"btn btn-success" %></td>
                <td><%= link_to "del", life_cycle_path(life), method: :delete, class:"btn btn-danger" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>



      <canvas id="myChart"></canvas>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      <script>
      var ctx = document.getElementById('myChart');
      var myChart = new Chart(ctx, {
          type: 'pie',
          data: {
              labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
              datasets: [{
                  label: '# of Votes',
                  data: [12, 19, 3, 5, 2, 3],
                  backgroundColor: [
                      'rgba(255, 99, 132, 0.2)',
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(255, 206, 86, 0.2)',
                      'rgba(75, 192, 192, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      'rgba(255, 159, 64, 0.2)'
                  ],
                  borderColor: [
                      'rgba(255, 99, 132, 1)',
                      'rgba(54, 162, 235, 1)',
                      'rgba(255, 206, 86, 1)',
                      'rgba(75, 192, 192, 1)',
                      'rgba(153, 102, 255, 1)',
                      'rgba(255, 159, 64, 1)'
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  y: {
                      beginAtZero: true
                  }
              }
          }
      });
      </script>

    </div>
  </div>
</div>
